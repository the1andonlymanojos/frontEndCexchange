(()=>{var e={};e.id=630,e.ids=[630],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},6113:e=>{"use strict";e.exports=require("crypto")},7147:e=>{"use strict";e.exports=require("fs")},2037:e=>{"use strict";e.exports=require("os")},1017:e=>{"use strict";e.exports=require("path")},7310:e=>{"use strict";e.exports=require("url")},9991:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>l.a,__next_app__:()=>u,originalPathname:()=>x,pages:()=>d,routeModule:()=>h,tree:()=>c});var i=t(482),r=t(9108),a=t(2563),l=t.n(a),n=t(8300),o={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>n[e]);t.d(s,o);let c=["",{children:["mylistings",{children:["offers",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,1237)),"/Users/manojos/WebstormProjects/cexchange/src/app/mylistings/offers/[id]/page.tsx"]}]},{}]},{}]},{metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,3881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(t.bind(t,2607)),"/Users/manojos/WebstormProjects/cexchange/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,9361,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,3881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],d=["/Users/manojos/WebstormProjects/cexchange/src/app/mylistings/offers/[id]/page.tsx"],x="/mylistings/offers/[id]/page",u={require:t,loadChunk:()=>Promise.resolve()},h=new i.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/mylistings/offers/[id]/page",pathname:"/mylistings/offers/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},8850:(e,s,t)=>{Promise.resolve().then(t.bind(t,1391))},1532:(e,s,t)=>{"use strict";t.d(s,{Z:()=>i});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let i=(0,t(9224).Z)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]])},1391:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>m});var i=t(5344),r=t(3729),a=t(9769),l=t(8428),n=t(6887),o=t(677),c=t(5094),d=t(1532);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let x=(0,t(9224).Z)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);var u=t(4513),h=t(2032);let m=({params:e})=>{console.log(e.id);let s=`${n.y}api/listings/offers/${e.id}`,[t,m]=(0,r.useState)([]),[f,p]=(0,r.useState)(null),[g,j]=(0,r.useState)(!0),[y,v]=(0,r.useState)(!1),[b,w]=(0,r.useState)(!0),{toast:N}=(0,a.pm)(),k=(0,l.useRouter)(),P=(0,r.useRef)(null),_=async()=>{let e=await fetch(s,{method:"GET",cache:"no-cache",credentials:"include"});if(200!==e.status&&401!==e.status&&v(!0),401===e.status){w(!1),N({title:"Uh Oh!",description:"Looks like you are not logged in, please to check offers"}),k.push(`/login?redirect=${window.location.pathname}`);return}let i=await e.json();if(console.log(i),"available"!==i.listing.availability){let e=i.offers.find(e=>1===e.accepted);e&&k.push(`/transactions/${e.transaction_id}`);return}if(i.offers){for(let e of i.offers){let s=Date.parse(e.expires_at)-Date.now();console.log(s);let t=Math.floor(s/864e5),i=Math.floor(s%864e5/36e5)+24*t;i>0?e.timeLeft=i:e.timeLeft=-1}m(i.offers),j(!1),p(i.listing),console.log(t)}i.listing&&(p(i.listing),j(!1))};return(0,r.useEffect)(()=>{_()},[]),i.jsx("div",{className:"flex-row flex justify-center",children:i.jsx("div",{className:"max-w-md w-[100vw]",children:(0,i.jsxs)("div",{className:"",children:[(0,i.jsxs)("div",{className:"flex fex-row justify-start items-center",onClick:e=>{k.push("/mylistings")},children:[i.jsx(d.Z,{className:""}),i.jsx("h1",{className:"text-2xl p-2",children:"My Listings"})]}),(0,i.jsxs)("div",{className:"flex flex-row justify-start bg-gray-100 p-1 rounded-md shadow items-center",onClick:e=>{k.push(`/listing/${f?.id}`)},children:[i.jsx("img",{src:`${n.y}`+f?.image_path,className:"w-24 h-24  object-cover rounded-2xl p-2  mr-2",alt:"thumbnail"}),(0,i.jsxs)("div",{className:"flex flex-row justify-between w-full",children:[i.jsx("div",{className:"text-xl",children:f?.title}),(0,i.jsxs)("div",{className:"flex flex-row justify-end text-xs ",children:["Highest bid:",i.jsx("br",{}),f?.highest_bid?f.highest_bid:"No offers yet"]})]})]}),i.jsx("div",{className:"m-2 text-lg",children:"Offers:"}),(0,i.jsxs)("div",{className:"m-2 text-base flex flex-col items-center justify-center",children:[0===t.length?i.jsx("div",{children:"No offers yet"}):null,g?i.jsx("div",{children:"Loading..."}):null]}),i.jsx("div",{children:t.map((e,s)=>i.jsx("div",{className:"w-full rounded-xl p-2 "+(null===e.accepted?"bg-gray-100":1===e.accepted?"bg-green-50":"bg-red-50"),children:(0,i.jsxs)("div",{className:"flex flex-row justify-between items-center flex-nowrap",children:[(0,i.jsxs)("h1",{children:[" Anonymous",i.jsx("br",{})," User"]}),(0,i.jsxs)("div",{className:"flex flex-col text-sm items-end",children:[i.jsx("div",{children:"Bid Amount"}),(0,i.jsxs)("div",{children:["₹",e.amount]})]}),(0,i.jsxs)("div",{className:"flex text-sm flex-col items-end",children:[i.jsx("div",{children:"Time Left"}),i.jsx("div",{children:e.timeLeft>0?e.timeLeft+" hours":"Expired"})]}),i.jsx("div",{children:(0,i.jsxs)("div",{className:"flex flex-col mr-3 justify-center items-center",children:[(0,i.jsxs)(o.dy,{children:[i.jsx(o.Qz,{asChild:!0,children:i.jsx(c.z,{variant:"outline",size:"icon",className:"h-8 w-8 bg-green-300 shrink-0 rounded-full",disabled:null!==e.accepted,children:i.jsx(x,{})})}),i.jsx(o.sc,{children:(0,i.jsxs)("div",{className:"mx-auto w-full max-w-sm",children:[(0,i.jsxs)(o.OX,{children:[i.jsx(o.iI,{children:"Are you absolutely sure?"}),(0,i.jsxs)(o.u6,{children:["This action cannot be undone. By clicking accept you agree to the bid of ₹",e.amount,". Failure to blah blah blah boilerplate"]})]}),(0,i.jsxs)(o.ze,{children:[i.jsx(c.z,{className:"bg-green-800",onClick:async s=>{let t=`${n.y}api/offers/respond/${e.id}`,r=await fetch(t,{method:"POST",cache:"no-cache",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({response:"accept"})}),a=await r.json();console.log(a),console.log("here"),200!==r.status?N({title:"Uh Oh!",variant:"destructive",description:"Failed to accept bid "+a.message}):(N({title:"Success",description:"Bid accepted",action:i.jsx(h.gD,{altText:"go to transaction page",onClick:()=>{console.log("going to transaction page")},children:"Open Transaction Page"})}),k.push(`/transactions/${a.transaction_id}`)),P.current.click()},children:"Accept Bid"}),i.jsx(o.uh,{asChild:!0,children:i.jsx(c.z,{ref:P,variant:"outline",children:"Cancel"})})]})]})})]}),(0,i.jsxs)(o.dy,{children:[i.jsx(o.Qz,{asChild:!0,children:i.jsx(c.z,{variant:"outline",size:"icon",className:"h-8 w-8 bg-red-300 shrink-0 rounded-full",disabled:null!==e.accepted,children:i.jsx(u.Z,{strokeWidth:1.25})})}),i.jsx(o.sc,{children:(0,i.jsxs)("div",{className:"mx-auto w-full max-w-sm",children:[(0,i.jsxs)(o.OX,{children:[i.jsx(o.iI,{children:"Are you absolutely sure?"}),(0,i.jsxs)(o.u6,{children:["This action cannot be undone. By clicking reject you are rejecting the bid of ₹",e.amount,". Failure to blah blah blah boilerplate"]})]}),(0,i.jsxs)(o.ze,{children:[i.jsx(c.z,{className:"bg-red-800",onClick:async s=>{let t=`${n.y}api/offers/respond/${e.id}`,i=await fetch(t,{method:"POST",cache:"no-cache",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({response:"reject"})}),r=await i.json();console.log(r),console.log("here"),200!==i.status?N({title:"Uh Oh!",variant:"destructive",description:"Failed to reject bid "+r.message}):N({title:"Success",description:"Bid rejected"}),P.current.click()},children:"Reject Bid"}),i.jsx(o.uh,{asChild:!0,children:i.jsx(c.z,{ref:P,variant:"outline",children:"Cancel"})})]})]})})]})]})})]})},e.id))})]})})})}},677:(e,s,t)=>{"use strict";t.d(s,{OX:()=>h,Qz:()=>o,dy:()=>n,iI:()=>f,sc:()=>u,u6:()=>p,uh:()=>d,ze:()=>m});var i=t(5344),r=t(3729),a=t(4885),l=t(1453);let n=({shouldScaleBackground:e=!0,...s})=>i.jsx(a.d.Root,{shouldScaleBackground:e,...s});n.displayName="Drawer";let o=a.d.Trigger,c=a.d.Portal,d=a.d.Close,x=r.forwardRef(({className:e,...s},t)=>i.jsx(a.d.Overlay,{ref:t,className:(0,l.cn)("fixed inset-0 z-50 bg-black/80",e),...s}));x.displayName=a.d.Overlay.displayName;let u=r.forwardRef(({className:e,children:s,...t},r)=>(0,i.jsxs)(c,{children:[i.jsx(x,{}),(0,i.jsxs)(a.d.Content,{ref:r,className:(0,l.cn)("fixed inset-x-0 bottom-0 z-50 mt-24 flex h-auto flex-col rounded-t-[10px] border bg-background",e),...t,children:[i.jsx("div",{className:"mx-auto mt-4 h-2 w-[100px] rounded-full bg-muted"}),s]})]}));u.displayName="DrawerContent";let h=({className:e,...s})=>i.jsx("div",{className:(0,l.cn)("grid gap-1.5 p-4 text-center sm:text-left",e),...s});h.displayName="DrawerHeader";let m=({className:e,...s})=>i.jsx("div",{className:(0,l.cn)("mt-auto flex flex-col gap-2 p-4",e),...s});m.displayName="DrawerFooter";let f=r.forwardRef(({className:e,...s},t)=>i.jsx(a.d.Title,{ref:t,className:(0,l.cn)("text-lg font-semibold leading-none tracking-tight",e),...s}));f.displayName=a.d.Title.displayName;let p=r.forwardRef(({className:e,...s},t)=>i.jsx(a.d.Description,{ref:t,className:(0,l.cn)("text-sm text-muted-foreground",e),...s}));p.displayName=a.d.Description.displayName},6887:(e,s,t)=>{"use strict";t.d(s,{y:()=>i});let i="https://manojshivagange.tech:3000/"},1237:(e,s,t)=>{"use strict";t.r(s),t.d(s,{$$typeof:()=>a,__esModule:()=>r,default:()=>l});let i=(0,t(6843).createProxy)(String.raw`/Users/manojos/WebstormProjects/cexchange/src/app/mylistings/offers/[id]/page.tsx`),{__esModule:r,$$typeof:a}=i,l=i.default},3881:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>r});var i=t(337);let r=e=>[{type:"image/x-icon",sizes:"16x16",url:(0,i.fillMetadataSegment)(".",e.params,"favicon.ico")+""}]}};var s=require("../../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),i=s.X(0,[638,204,337,885,302],()=>t(9991));module.exports=i})();